namespace = punic_wars

########################################################################################
# Trade Relations (ROME) - Punic Wars background
########################################################################################
# Phase 1 of 3
country_event = {
	id = punic_wars.1
	title = "punic_wars.1.t"
	desc = "punic_wars.1.d"
	picture = mare_internum
	fire_only_once = yes
	mean_time_to_happen = { months = 12 }

	trigger = {
		tag = ROM
		owns_or_non_sovereign_subject_of = 39
		CAR = {
			is_subject = no
			home_trade_node = {
				is_strongest_trade_power = CAR
			}
			NOT = {
				OR = {
					has_global_flag = first_punic_war_end
					has_global_flag = first_punic_war_start
					has_global_flag = prepare_punic_wars
				}
			}
		}
	}

	option = {
		name = "punic_wars.1.a"
		ai_chance = { factor = 90 }
		custom_tooltip = punic_wars.1.tt.a
		add_opinion = {
			who = CAR
			modifier = careful_trade_expansion
			multiplier = 2
		}
		CAR = {
			country_event = {
				id = punic_wars.4
				days = 1
			}
		}
		add_country_modifier = {
			name = punic_roman_trade_1a
			duration = -1
		}
		set_country_flag = had_punic_wars.1_trade
	}
	option = {
		name = "punic_wars.1.b"
		ai_chance = { factor = 10 }
		custom_tooltip = punic_wars.1.tt.b
		add_historical_rival = CAR
		remove_opinion = {
			who = CAR
			modifier = traders_insulted
		}
		reverse_remove_opinion = {
			who = CAR
			modifier = traders_insulted
		}
		CAR = { add_historical_rival = ROM }
		add_country_modifier = {
			name = punic_roman_rivalry_1
			duration = -1
		}
		set_country_flag = had_punic_wars.1_rival
	}
}
# Phase 2 of 3
country_event = {
	id = punic_wars.2
	title = "punic_wars.2.t"
	desc = "punic_wars.2.d"
	picture = mare_internum
	fire_only_once = yes
	mean_time_to_happen = { months = 24 }

	trigger = {
		tag = ROM
		has_country_flag = had_punic_wars.1_trade
		OR = {
			owns_or_non_sovereign_subject_of = 5653
			owns_or_non_sovereign_subject_of = 17
		}
		NOT = {
			OR = {
				has_global_flag = first_punic_war_end
				has_global_flag = first_punic_war_start
				has_global_flag = prepare_punic_wars
			}
		}
	}

	immediate = {
		set_country_flag = had_punic_wars.2
	}

	option = {
		name = "punic_wars.2.a"
		custom_tooltip = punic_wars.2.tt
		remove_country_modifier = punic_roman_trade_1a
		add_country_modifier = {
			name = punic_roman_trade_2a
			duration = -1
		}
		add_opinion = {
			who = CAR
			modifier = careful_trade_expansion
			multiplier = 2
		}
		CAR = {
			country_event = {
				id = punic_wars.5
				days = 1
			}
		}
	}
}
# Phase 3 of 3
country_event = {
	id = punic_wars.3
	title = "punic_wars.3.t"
	desc = "punic_wars.3.d"
	picture = italicgfx_first_punic_war
	fire_only_once = yes
	mean_time_to_happen = { months = 48 }

	trigger = {
		tag = ROM
		has_country_flag = had_punic_wars.2
		OR = {
			ROM = { owns_or_non_sovereign_subject_of = 14 }
			CAR = { owns_or_non_sovereign_subject_of = 7 }
		}
		NOT = {
			OR = {
				has_global_flag = first_punic_war_end
				has_global_flag = first_punic_war_start
				has_global_flag = prepare_punic_wars
			}
		}
	}

	immediate = {
		clr_country_flag = had_punic_wars.2
		clr_country_flag = had_punic_wars.1_trade
		set_global_flag = prepare_punic_wars
	}

	option = {
		name = "punic_wars.3.a"
		custom_tooltip = punic_wars.3.tt
		custom_tooltip = punic_wars_can_start.tt
		remove_country_modifier = punic_roman_trade_2a
		add_historical_rival = CAR
		add_country_modifier = {
			name = punic_wars_preparations
			duration = 7300
		}
		remove_opinion = {
			who = CAR
			modifier = traders_insulted
		}
		add_manpower = 5
		add_sailors = 2500
		CAR = {
			country_event = {
				id = punic_wars.6
				days = 1
			}
		}
		add_stability = -1
	}
}

########################################################################################
# Trade Relation (CARTHAGE) - Punic Wars background
########################################################################################
# Phase 1 of 3, Carthage
country_event = {
	id = punic_wars.4
	title = "punic_wars.4.t"
	desc = "punic_wars.4.d"
	picture = roman_question
	is_triggered_only = yes

	option = {
		name = "punic_wars.4.a"
		custom_tooltip = punic_wars.4.tt
		add_opinion = {
			who = ROM
			modifier = careful_trade_expansion
			multiplier = 2
		}
		add_country_modifier = {
			name = punic_roman_trade_1b
			duration = -1
		}
	}
}
# Phase 2 of 3, Carthage
country_event = {
	id = punic_wars.5
	title = "punic_wars.5.t"
	desc = "punic_wars.5.d"
	picture = roman_question
	is_triggered_only = yes

	option = {
		name = "punic_wars.5.a"
		custom_tooltip = punic_wars.5.tt
		add_opinion = {
			who = ROM
			modifier = careful_trade_expansion
			multiplier = 2
		}
		remove_country_modifier = punic_roman_trade_1b
		add_country_modifier = {
			name = punic_roman_trade_2b
			duration = -1
		}
	}
}
# Phase 3 of 3, Carthage
country_event = {
	id = punic_wars.6
	title = "punic_wars.6.t"
	desc = "punic_wars.6.d"
	picture = italicgfx_first_punic_war
	is_triggered_only = yes

	option = {
		name = "punic_wars.6.a"
		custom_tooltip = punic_wars.6.tt
		custom_tooltip = punic_wars_can_start.tt
		remove_country_modifier = punic_roman_trade_2b
		add_historical_rival = ROM
		add_country_modifier = {
			name = punic_wars_preparations
			duration = 7300
		}
		remove_opinion = {
			who = ROM
			modifier = traders_insulted
		}
		add_manpower = 10
		add_sailors = 5000
		add_stability = -1
	}
}

########################################################################################
# Unhistorical Path (Rivalry from the get go) - Punic Wars background
# Contains both phase 2 of the rivalry path for ROME and the alternative phase 3 for both ROME and Carthage
########################################################################################
# Alternative phase 2 (ROME)
country_event = {
	id = punic_wars.7
	title = "punic_wars.7.t"
	desc = "punic_wars.7.d"
	picture = mare_internum
	fire_only_once = yes
	mean_time_to_happen = { months = 24 }

	trigger = {
		tag = ROM
		has_country_flag = had_punic_wars.1_rival
		owns_or_non_sovereign_subject_of = 5653
		NOT = {
			OR = {
				has_global_flag = first_punic_war_end
				has_global_flag = first_punic_war_start
				has_global_flag = prepare_punic_wars
			}
		}
	}

	immediate = {
		set_country_flag = had_punic_wars.7
	}

	option = {
		name = "punic_wars.7.a"
		custom_tooltip = punic_wars.7.tt
		remove_country_modifier = punic_roman_rivalry_1
		add_country_modifier = {
			name = punic_roman_rivalry_2
			duration = -1
		}
		remove_opinion = {
			who = CAR
			modifier = traders_insulted
		}
		reverse_remove_opinion = {
			who = CAR
			modifier = traders_insulted
		}

	}
}
# Alternative phase 3 (ROME)
country_event = {
	id = punic_wars.8
	title = "punic_wars.8.t"
	desc = "punic_wars.8.d"
	picture = italicgfx_first_punic_war
	fire_only_once = yes
	mean_time_to_happen = { months = 48 }

	trigger = {
		tag = ROM
		has_country_flag = had_punic_wars.7
		OR = {
			ROM = { owns_or_non_sovereign_subject_of = 14 }
			CAR = { owns_or_non_sovereign_subject_of = 7 }
		}
		NOT = {
			OR = {
				has_global_flag = first_punic_war_end
				has_global_flag = first_punic_war_start
				has_global_flag = prepare_punic_wars
			}
		}
	}

	immediate = {
		clr_country_flag = had_punic_wars.7
		clr_country_flag = had_punic_wars.1_rival
		set_global_flag = prepare_punic_wars
	}

	option = {
		name = "punic_wars.8.a"
		custom_tooltip = punic_wars.8.tt
		custom_tooltip = punic_wars_can_start.tt
		remove_country_modifier = punic_roman_rivalry_2
		add_country_modifier = {
			name = punic_wars_preparations
			duration = 7300
		}
		remove_opinion = {
			who = CAR
			modifier = traders_insulted
		}
		add_manpower = 5
		add_sailors = 2500
		custom_tooltip = punic_wars.8.tt2
		hidden_effect = {
			every_subject_country = {
				add_liberty_desire = -25
			}
		}
		CAR = {
			country_event = {
				id = punic_wars.9
				days = 1
			}
		}
	}
}
# Alternative phase 3 (CARTHAGE)
country_event = {
	id = punic_wars.9
	title = "punic_wars.9.t"
	desc = "punic_wars.9.d"
	picture = italicgfx_first_punic_war
	is_triggered_only = yes

	option = {
		name = "punic_wars.9.a"
		custom_tooltip = punic_wars.9.tt
		custom_tooltip = punic_wars_can_start.tt
		add_country_modifier = {
			name = punic_wars_preparations
			duration = 7300
		}
		remove_opinion = {
			who = ROM
			modifier = traders_insulted
		}
		add_manpower = 10
		add_sailors = 5000
	}
}

########################################################################################
# First Punic War started - notification event
########################################################################################
country_event = {
	id = punic_wars.10
	title = "punic_wars.10.t"
	desc = "punic_wars.10.d"
	picture = italicgfx_first_punic_war
	fire_only_once = yes

	trigger = {
		tag = ROM
		war_with = CAR
		has_global_flag = prepare_punic_wars
		NOT = {
			has_global_flag = first_punic_war_end
		}
	}

	mean_time_to_happen = { days = 2 }

	immediate = {
		hidden_effect = { #mamertines take Messana
			set_global_flag = first_punic_war_start
			clr_global_flag = prepare_punic_wars
			7 = {
				cede_province = ROM
				mercenary_infantry = ROM
				mercenary_infantry = ROM
			}
			13 = {
				add_core = ROM
				cede_province = ROM
			}
			add_country_modifier = {
				name = punic_wars_rome_fleet_buff
				duration = -1
			}
		}
	}

	option = {
		name = "punic_wars.10.a"
		add_sailors = 5
		custom_tooltip = punic_wars.10.tt
		custom_tooltip = tooltip_has_happened
		tooltip = {
			7 = {
				cede_province = ROM
				mercenary_infantry = ROM
				mercenary_infantry = ROM
			}
			13 = {
				add_core = ROM
				cede_province = ROM
			}
			add_country_modifier = {
				name = punic_wars_rome_fleet_buff
				duration = -1
			}
		}
		custom_tooltip = tooltip_has_happened_barrier
		hidden_effect = {
			every_known_country = {
				limit = {
					capital_scope = {
						OR = {
							area = syracuse_area
							area = sicilia_est
							area = sicelia_area
							area = sicani_area
							area = sicilia_west
						}
					}
					NOT = {
						is_subject_of = ROM
					}
				}
				declare_war = ROM
			}
		}
	}
}

########################################################################################
# First Punic War end
########################################################################################
country_event = {
	id = punic_wars.11
	title = "punic_wars.11.t"
	desc = "punic_wars.11.d"
	picture = italicgfx_first_punic_war_end
	fire_only_once = yes

	trigger = {
		tag = ROM
		has_global_flag = first_punic_war_start
		war_with = CAR
		war_score_against = {
			who = CAR
			value = 30
		}
		pg_sicily_group = {
			type = all
			OR = {
				controlled_by = ROM
				controller = {
					is_subject_of = ROM
				}
				owner = { NOT = { war_with = ROM } }
			}
		}
	}

	mean_time_to_happen = { months = 4 }


	immediate = {
		hidden_effect = {
			CAR = {
				pg_italica_suburbica_group = {
					limit = { OR = { owned_by = PREV owned_by_subject_of = PREV } }
					remove_core = OWNER
					add_claim = OWNER
					cede_province = ROM
					if = {
						limit = {
							culture_group = italic_group
						}
						add_core = ROM
					}
				}
			}
			13 = {
				remove_core = CAR
				add_claim = CAR
			}
			7 = {
				remove_core = CAR
				add_claim = CAR
			}
			pg_sicily_group = {
				limit = {
					NOT = {
						owned_by = ROM
					}
				}
				cede_province = ROM
				remove_core = CAR
				add_claim = CAR
				if = {
					limit = {
						culture_group = italic_group
					}
					add_core = ROM
				}
			}
			remove_country_modifier = punic_wars_rome_fleet_buff
			clr_global_flag = first_punic_war_start
			set_global_flag = first_punic_war_end
			white_peace = CAR
		}
	}

	option = {
		name = "punic_wars.11.a"
		add_prestige = 20
		add_navy_tradition = 20
		add_army_tradition = 20
		add_treasury = 3000
		custom_tooltip = punic_wars.11.tt
		hidden_effect = {
			CAR = {
				country_event = {
					id = punic_wars.12
					days = 4
				}
			}
		}
	}
}
########################################################################################
# Mercenary War
########################################################################################
country_event = {
	id = punic_wars.12
	title = "punic_wars.12.t"
	desc = "punic_wars.12.d"
	picture = battle
	major = yes
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.12.a"
		add_manpower = -10
		add_stability = -2
		custom_tooltip = punic_wars.12.tt
		hidden_effect = {
			set_variable = { which = whilecounter value = 3 }
			while = {
				limit = { check_variable = { whilecounter = 1 }  }
				subtract_variable = { whilecounter = 1 }
				random_owned_province = {
					limit = {
						region = sardinia_corsica_region
						NOT = { has_province_flag = rebels_spawned }
					}
					set_province_flag = rebels_spawned
					change_controller = REB
					spawn_rebels = {
						type = nationalist
						size = 3
					}
				}
			}
			set_variable = { which = whilecounter value = 6 }
			while = {
				limit = { check_variable = { whilecounter = 1 }  }
				subtract_variable = { whilecounter = 1 }
				random_owned_province = {
					limit = {
						region = africa_region
						NOT = { has_province_flag = rebels_spawned }
					}
					set_province_flag = rebels_spawned
					change_controller = REB
					spawn_rebels = {
						type = particularist_rebels
						size = 4
					}
				}
			}
			ROM = {
				country_event = {
					id = punic_wars.1202
					days = 30
				}
				country_event = {
					id = punic_wars.13
					days = 182
				}
				country_event = {
					id = punic_wars.1301
					days = 182
				}
			}
		}
	}
}

country_event = {
	id = punic_wars.1202
	title = "punic_wars.1202.t"
	desc = "punic_wars.1202.d"
	picture = battle
	fire_only_once = yes
	major = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.1202.a"
		ai_chance = { factor = 100 }
		add_treasury = -600
		add_manpower = -4
		add_army_tradition = -5
		custom_tooltip = punic_wars.1202.tt
		hidden_effect = {
			CAR = {
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							region = sardinia_corsica_region
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 5
						}
					}
				}
			}
		}
	}

	option = {
		name = "punic_wars.1202.b"
		add_prestige = -5
		custom_tooltip = punic_wars.1202.ttb
	}
}

########################################################################################
# Sardinia and Corsica Goes to Rome
########################################################################################
country_event = {
	id = punic_wars.13
	title = "punic_wars.13.t"
	desc = "punic_wars.13.d"
	picture = maniple
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_global_flag = first_punic_war_end
		NOT = {
			war_with = CAR
		}
		sardinia_corsica_region = {
			type = any
			owned_by = CAR
			controlled_by = REB
		}
	}

	option = {
		name = "punic_wars.13.a"
		custom_tooltip = punic_wars.13.tt
		set_global_flag = barcids_soon_rise
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = rom_supported_merc_war
				}
				sardinia_corsica_region = {
					limit = {
						owned_by = CAR
					}
					kill_units = { who = enemy }
					cede_province = ROM
					remove_core = CAR
					add_claim = CAR
				}
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							region = sardinia_corsica_region
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
				every_known_country = {
					limit = {
						capital_scope = {
							OR = {
								region = sardinia_corsica_region
							}
						}
					}
					declare_war = ROM
				}
			}
			else = {
				pg_sardinia_group = {
					limit = {
						owned_by = CAR
					}
					kill_units = { who = enemy }
					add_core = SAR
					remove_core = CAR
					add_claim = CAR
					add_claim = ROM
				}
				pg_corsica_group = {
					limit = {
						owned_by = CAR
					}
					kill_units = { who = enemy }
					add_core = COR
					remove_core = CAR
					add_claim = CAR
					add_claim = ROM
				}
				CAR = {
					release = SAR
					release = COR
				}
			}
		}
	}
}

########################################################################################
# Sardinia and Corsica does not go to Rome
########################################################################################
country_event = {
	id = punic_wars.1301
	title = "punic_wars.1301.t"
	desc = "punic_wars.1301.d"
	picture = maniple
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = {
			war_with = CAR
		}
		NOT = {
			sardinia_corsica_region = {
				type = any
				owned_by = CAR
				controlled_by = REB
			}
		}
	}

	option = {
		name = "punic_wars.1301.a"
		custom_tooltip = punic_wars.1301.tt
		hidden_effect = {
			set_global_flag = barcids_soon_rise
			sardinia_corsica_region = {
				limit = { owned_by = CAR }
				add_core = ROM
			}
		}
	}
}

########################################################################################
# Barcids take Spain as domain and attack all the tribes to expand it and get more resources for next Punic war
########################################################################################
country_event = {
	id = punic_wars.14
	title = "punic_wars.14.t"
	desc = "punic_wars.14.d"
	picture = punicgfx_barcids
	fire_only_once = yes
	major = yes

	trigger = {
		tag = CAR
		has_global_flag = barcids_soon_rise
		NOT = {
			has_global_flag = barcids_rise
		}
		NOT = {
			war_with = ROM
		}
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			value = 3
			OR = {
				region = hispania_baetica
				region = lusitania
				region = cartaginensis_region
				region = hispania_tarraconensis
				region = gallaecia
			}
		}
	}
	mean_time_to_happen = { months = 6 }

	immediate = {
		hidden_effect = {
			clr_global_flag = barcids_soon_rise
			set_global_flag = barcids_rise
			if = {
				limit = {
					exists = CRT
				}
				CAR = {
					inherit = CRT
				}
				western_africa_superregion = {
					type = all
					remove_core = CRT
				}
			}
			else = {
				western_africa_superregion = {
					type = all
					remove_core = CRT
				}
			}
			CRT = {
				override_country_name = "Barcids"
				country_event = { id = new_ideas.1 }
			}
			151 = {
				add_core = CRT
				cede_province = CRT
				remove_core = CAR
				add_base_tax = 1
				add_base_production = 2
				add_base_manpower = -1
				change_culture = ibero_phoenician
				change_religion = punic_religion
				change_province_name = "Qart Hadasht"
				rename_capital = "Qart Hadasht"
			}
			136 = {
				add_core = CRT
				cede_province = CRT
				remove_core = CAR
				infantry = CRT
				infantry = CRT
				infantry = CRT
				infantry = CRT
				infantry = CRT
				cossack_cavalry = CRT
				cossack_cavalry = CRT
				cavalry = CRT
				cavalry = CRT
				cavalry = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				heavy_ship = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
				transport = CRT
			}
			CRT = {
				add_accepted_culture = ibero_phoenician
				change_religion = punic_religion
				change_government = monarchy
				add_government_reform = barcid_domain
				add_government_reform = mercenary_army_reform
				add_army_tradition = 50
				add_army_professionalism = 0.4
				add_manpower = 30
				add_sailors = 5
				add_treasury = 300
				remove_idea_group = naval_ideas
				remove_idea_group = maritime_ideas
				remove_idea_group = shipbuilding_ideas
				add_idea_group = leadership_ideas
				add_idea_group = mercenary_ideas
				add_idea = meritocratic_recruitment_idea
				add_idea = experienced_generals_idea
				add_idea = regular_trainings_idea
				add_idea = expanded_officercorps_idea
				add_idea = recovery_after_the_battle_idea
				add_idea = military_science_idea
				add_idea = new_army_tactics_idea
				add_idea = mercenary_army_idea
				add_idea = spare_our_blood_idea
				add_idea = long_term_contracts_idea
				add_idea = experienced_mercenary_leaders_idea
				add_idea = mass_recruitment_idea
				add_idea = own_forces_reserves_idea
				add_idea = auxiliares_in_army_idea
				add_stability = 2
				add_prestige = 80
				add_mil_power = 300
				add_dip_power = 300
				add_adm_power = 300
				define_ruler = {
					name = "Hamilcar"
					dynasty = "Barca"
					ADM = 5
					DIP = 5
					MIL = 5
					culture = punic
					age = 45
				}
				define_ruler_to_general = {
					name = "Hamilcar Barca"
					fire = 6
					shock = 5
					manuever = 6
					siege = 4
				}
				define_heir = {
					name = "Hasdrubal the Fair"
					dynasty = "Barca"
					ADM = 5
					DIP = 6
					MIL = 3
					culture = punic
					age = 15
				}
				define_heir_to_general = {
					name = "Hasdrubal Barca"
					fire = 5
					shock = 4
					manuever = 5
					siege = 3
				}
				add_country_modifier = {
					name = barcids_invasion_iberia_buff
					duration = 3650
				}
				add_historical_rival = ROM
			}
			ROM = {
				add_historical_rival = CRT
			}
			CAR = {
				every_owned_province = {
					limit = {
						superregion = hispania_superregion
						NOT = {
							area = baleares_area
						}
					}
					add_core = CRT
					remove_core = CAR
					cede_province = CRT
				}
			}

			#startdomain
			gades_area = {
				add_core = CRT
				remove_core = CAR
				cede_province = CRT
			}
			malaca_area = {
				add_core = CRT
				remove_core = CAR
				cede_province = CRT
			}
			regina_turdulorum_area = {
				add_core = CRT
				remove_core = CAR
				cede_province = CRT
			}
			carthaginensis_area = {
				add_core = CRT
				remove_core = CAR
				cede_province = CRT
			}
			# cores for them
			hispania_baetica = { add_core = CRT }
			valentia_area = { add_core = CRT }
			edetania_area = { add_core = CRT }
			hispania_citerior_area = { add_core = CRT }
			carthaginensis_area = { add_core = CRT }
			deitania_area = { add_core = CRT }
			hispania_ulterior_area = { add_core = CRT }
			emeritanus_area = { add_core = CRT }
			baetis_area = { add_core = CRT }
			CAR = {
				every_subject_country = {
					limit = {
						capital_scope = {
							superregion = hispania_superregion
						}
					}
					grant_independence = yes
				}
			}
			157 = {
				add_core = HOM
				cede_province = HOM
			}
			6510 = {
				add_core = ZAT
				cede_province = ZAT
			}
			CAR = {
				create_subject = {
					subject_type = private_domain
					subject = CRT
				}
				add_truce_with = CRT
				remove_historical_rival = CRT
			}
			CRT = {
				add_historical_rival = ROM
				remove_historical_rival = CAR
				add_liberty_desire = -50
				add_rival = ROM
				add_truce_with = CAR
				add_truce_with = ROM
			}
			ROM = {
				add_historical_rival = CRT
				add_truce_with = CRT
			}
			TTQ = {
				country_event = {
					id = punic_wars.1401
				}
			}
			every_country = {
				limit = {
					OR = {
						core_claim = CRT
					}
					capital_scope = {
						OR = {
							region = cartaginensis_region
							region = hispania_baetica
						}
					}
				}
				reverse_add_casus_belli = {
					target = CRT
					type = cb_core
					months = 360
				}
			}
			hispania_superregion = {
				limit = {
					is_core = CRT
					owner = { NOT = { tag = CRT } }
				}
				owner = { set_country_flag = hannibal_war_target }
			}
		}
	}

	option = {
		name = "punic_wars.14.a" # lets go barcids! wish you luck
		custom_tooltip = punic_wars.14.tt
		ai_chance = {
			factor = 100
		}
		add_prestige = 3
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						core_claim = CRT
					}
					capital_scope = {
						OR = {
							region = cartaginensis_region
							region = hispania_baetica
						}
					}
					NOT = { tag = TTQ }
				}
				declare_war = CRT
			}
			CRT = {
				country_event = {
					id = punic_wars.140
					days = 3650
				}
			}
		}
	}
	option = {
		name = "punic_wars.14.b" #player switch to Barcids!
		custom_tooltip = punic_wars.14.tt
		add_prestige = 3
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						core_claim = CRT
					}
					capital_scope = {
						OR = {
							region = cartaginensis_region
							region = hispania_baetica
						}
					}
					NOT = { tag = TTQ }
				}
				declare_war = CRT
			}
		}
		switch_tag = CRT
		CRT = {
			country_event = {
				id = punic_wars.140
				days = 3650
			}
		}
	}
}

country_event = { #Tartessos submits
	id = punic_wars.1401
	title = "punic_wars.1401.t"
	desc = "punic_wars.1401.d"
	picture = punicgfx_hannibal2
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.1401.a"
		ai_chance = { factor = 80 }
		add_stability = 1
		CRT = {
			create_subject = {
				subject_type = half_autonomous_vassal
				subject = PREV
			}
		}
	}

	option = {
		ai_chance = { factor = 20 }
		name = "punic_wars.1401.b"
		declare_war = CRT
	}
}
country_event = { # Barcids eat Hispanian neighbour, hispanian
	id = punic_wars.1402
	title = "punic_wars.1402.t"
	desc = "punic_wars.1402.d"
	picture = punicgfx_hannibal2

	mean_time_to_happen = {
		months = 2
	}

	trigger = {
		has_country_flag = hannibal_war_target
		war_with = CRT
		CRT = {
			war_score_against = {
				who = ROOT
				value = 50
			}
		}
		NOT = { has_global_flag = hannibal_surrendering }
	}

	immediate = {
		set_global_flag = hannibal_surrendering
		clr_country_flag = hannibal_war_target
	}

	option = {
		name = "punic_wars.1402.a"
		ai_chance = { factor = 100 }
		every_known_country = {
			limit = {
				OR = {
					is_in_war = {
						attacker_leader = ROOT
						defender_leader = CRT
					}
					is_in_war = {
						defender_leader = ROOT
						attacker_leader = CRT
					}
				}
			}
			every_owned_province = {
				limit = {
					controlled_by = CRT
					OR = {
						is_core = CRT
						is_claim = CRT
					}
				}
				set_province_flag = hannibal_take_prov
			}
		}
		CRT = {
			country_event = {
				id = punic_wars.1403
			}
		}
	}

	option = {
		name = "punic_wars.1402.b"
		add_war_exhaustion = -2
	}
}
country_event = { # Barcids eat Hispanian neighbour, carthage
	id = punic_wars.1403
	title = "punic_wars.1403.t"
	desc = "punic_wars.1403.d"
	picture = punicgfx_hannibal2
	is_triggered_only = yes
	major = yes

	option = {
		name = "punic_wars.1403.a"
		ai_chance = { factor = 100 }
		custom_tooltip = punic_wars.1403.tt
		FROM = {
			white_peace = CRT
			hidden_effect = {
				every_owned_province = {
					limit = {
						is_core = CRT
					}
					cede_province = CRT
				}
				hispania_superregion = {
					limit = {
						has_province_flag = hannibal_take_prov
					}
					cede_province = CRT
					clr_province_flag = hannibal_take_prov
				}
			}
		}
		clr_global_flag = hannibal_surrendering
	}

	option = {
		name = "punic_wars.1403.b"
		hidden_effect = {
			hispania_superregion = {
				limit = {
					has_province_flag = hannibal_take_prov
				}
				clr_province_flag = hannibal_take_prov
			}
		}
		clr_global_flag = hannibal_surrendering
	}
}

country_event = { # Hannibal takes power after death of father
	id = punic_wars.140
	title = "punic_wars.140.t"
	desc = "punic_wars.140.d"
	picture = punicgfx_hannibal2
	fire_only_once = yes
	major = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.140.a"
		add_prestige = 3
		kill_ruler = yes
		define_ruler = {
			name = "Hannibal"
			dynasty = "Barca"
			ADM = 6
			DIP = 5
			MIL = 6
			culture = punic
			age = 20
		}
		define_ruler_to_general = {
			name = "Hannibal Barca"
			fire = 9
			shock = 10
			manuever = 9
			siege = 3
		}
		define_heir = {
			name = "Hasdrubal"
			dynasty = "Barca"
			ADM = 3
			DIP = 3
			MIL = 3
			culture = punic
			age = 19
		}
		define_heir_to_general = {
			name = "Hasdrubal Barca"
			fire = 5
			shock = 4
			manuever = 3
			siege = 2
		}
		define_general = {
			name = "Mago Barca"
			fire = 4
			shock = 5
			manuever = 5
			siege = 2
		}
		remove_country_modifier = barcids_invasion_iberia_buff
		add_country_modifier = {
			name = barcids_hannibal_buff
			duration = 3650
		}
		toletum_area = { add_core = CRT }
		numantia_area = { add_core = CRT }
		caesaraugustanus_area = { add_core = CRT }
		iberus_area = { add_core = CRT }
		lacetania_area = { add_core = CRT }
		ilercavonesis_area = { add_core = CRT }
		rhoda_area = { add_core = CRT }
		olcadia_area = { add_core = CRT }
		hidden_effect = {
			ROM = {
				country_event = {
					id = punic_wars.1404
					days = 10
				}
			}
			hispania_superregion = {
				limit = {
					is_core = CRT
					owner = {
						NOT = {
							tag = CRT
							is_subject_of = CRT
						}
					}
				}
				owner = { set_country_flag = hannibal_war_target }
			}
		}
	}
}

########################################################################################
# Rome event for Hannibal
########################################################################################

country_event = {
	id = punic_wars.1404
	title = "punic_wars.1404.t"
	desc = "punic_wars.1404.d"
	picture = punicgfx_hannibal2
	is_triggered_only = yes

	option = {
		name = "punic_wars.1404.a"
		custom_tooltip = punic_wars.1404.tt
	}
}

########################################################################################
# Second Punic War begin oppourtunity, Rome begins
########################################################################################

country_event = {
	id = punic_wars.14051
	title = "punic_wars.1405.t"
	desc = "punic_wars.1405.d"
	picture = punicgfx_hannibal2
	fire_only_once = yes
	hidden = yes
	mean_time_to_happen = {
		months = 2
	}

	trigger = {
		tag = ROM
		has_global_flag = barcids_rise
		NOT = {	has_global_flag = second_punic_war_end }
		NOT = {
			war_with = CRT
		}
		CRT = {
			any_owned_province = {
				province_group = pg_north_of_iberus_group
			}
		}
	}

	option = {
		name = "punic_wars.1405.a"
		CRT = {
			random_owned_province = {
				limit = {
					province_group = pg_north_of_iberus_group
				}
				province_event = {
					id = punic_wars.14052
				}
			}
		}
	}
}
province_event = {
	id = punic_wars.14052
	title = "punic_wars.1405.t"
	desc = "punic_wars.1405.d"
	picture = punicgfx_hannibal2
	is_triggered_only = yes
	hidden = yes

	option = {
		name = "punic_wars.1405.a"
		ROM = {
			country_event = {
				id = punic_wars.14053
			}
		}
	}
}

country_event = {
	id = punic_wars.14053
	title = "punic_wars.1405.t"
	desc = "punic_wars.1405.d"
	picture = fall_of_saguntum
	major = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.1405.a"
		custom_tooltip = punic_wars.1405.tt
		hidden_effect = {
			declare_war_with_cb = {
				casus_belli = cb_punic_war
				who = CRT
			}
			country_event = {
				id = punic_wars.15
			}
		}
	}

	option = {
		name = "punic_wars.1405.b"
		add_stability = -2
		add_prestige = -50
	}
}

########################################################################################
# Second Punic War started - notification event for Rome
########################################################################################
country_event = {
	id = punic_wars.15
	title = "punic_wars.15.t"
	desc = "punic_wars.15.d"
	picture = maniple
	fire_only_once = yes

	trigger = {
		tag = ROM
		has_global_flag = barcids_rise
		NOT = {	has_global_flag = second_punic_war_end }
		war_with = CAR
	}

	mean_time_to_happen = { months = 1 }

	immediate = {
		hidden_effect = {
			set_global_flag = second_punic_war_start
			iberus_area = {
				cede_province = CRT
				add_core = CRT
			}
			CRT = {
				every_owned_province = {
					ROM = {
						discover_province = PREV
					}
				}
				every_subject_country = {
					every_owned_province = {
						ROM = {
							discover_province = PREV
						}
					}
				}
			}
		}
	}

	option = {
		name = "punic_wars.15.a"
		add_prestige = -3
		hidden_effect = {
			CAR = {
				country_event = {
					id = punic_wars.150
				}
			}
			ROM = { #Landing in Emporia
				country_event = {
					id = punic_wars.16
					days = 14
				}
			}
		}
		add_country_modifier = {
			name = rom_punic_war_2_navy_buff
			duration = 10950
		}
	}
}
country_event = { # Second Punic War started - notification event for Carthage
	id = punic_wars.150
	title = "punic_wars.150.t"
	desc = "punic_wars.150.d"
	picture = battle
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.150.a"
		add_prestige = 3
		CAR = {
			country_event = {
				id = punic_wars.17
				days = 30
			}
		}
	}
}

country_event = { ##Landing in Emporia
	id = punic_wars.16
	title = "punic_wars.16.t"
	desc = "punic_wars.16.d"
	picture = battle
	fire_only_once = yes
	is_triggered_only = yes


	option = {
		name = "punic_wars.16.a"
		custom_tooltip = punic_wars.16.tt
		hidden_effect = {
			pg_north_of_iberus_coast_group = {
				if = {
					limit = {
						owner = {
							war_with = ROM
						}
					}
					change_controller = ROM
				}
				else = {
					cede_province = ROM
				}
			}
		}
		ROM = {
			define_general = {
				name = "Publius Cornelius Scipio" #not that Scipio, but his relative who first landed in Spain
				fire = 3
				shock = 3
				manuever = 3
				siege = 2
			}
			define_general = {
				name = "Publius Cornelius Scipio Africanus" # now that is that one, the legend
				fire = 7
				shock = 9
				manuever = 9
				siege = 4
			}
			define_general = {
				name = "Gaius Terentius Varro" #looser of Cannae
				fire = 2
				shock = 2
				manuever = 2
				siege = 2
			}
			define_general = {
				name = "Quintus Fabius Maximus" #Cunctator, "the delayer" dictator of Rome who pressed "go guerilla" against Hannibal, exausting him
				fire = 3
				shock = 4
				manuever = 7
				siege = 2
			}
			define_general = {
				name = "Marcus Claudius Marcellus" #bane of Syracuse and gauls
				fire = 3
				shock = 4
				manuever = 4
				siege = 6
			}
		}
	}
}

country_event = { ##Alp Crossing
	id = punic_wars.17
	title = "punic_wars.17.t"
	desc = "punic_wars.17.d"
	picture = hannibal1
	fire_only_once = yes
	is_triggered_only = yes


	option = {
		name = "punic_wars.17.a"
		custom_tooltip = punic_wars.17.tt
		hidden_effect = {
			set_global_flag = hannibal_in_italy_flag
			102 = {
				cede_province = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				mercenary_infantry = CRT
				samurai_infantry = CRT
				samurai_infantry = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				artillery = CRT
				cossack_cavalry = CRT
				cossack_cavalry = CRT
				cossack_cavalry = CRT
				cavalry = CRT
				cavalry = CRT
				cavalry = CRT
			}
			101 = {
				cede_province = CRT
			}
			gallia_cisalpina = {
				CRT = { discover_province = PREV }
				CAR = { discover_province = PREV }
			}
			every_country = {
				limit = {
					is_subject = no
					capital_scope = {
						region = gallia_cisalpina
					}
				}
				country_event = {
					id = punic_wars.170
				}
			}
			ROM = {
				add_country_modifier = {
					name = alps_crossing_caught_by_surprise
					duration = 700
				}
				country_event = {
					id = punic_wars.171
				}
			}
		}
	}
}

country_event = { ##Alp Crossing - vassalizing cisalpine celts
	id = punic_wars.170
	title = "punic_wars.170.t"
	desc = "punic_wars.170.d"
	picture = hannibal1
	is_triggered_only = yes


	option = {
		name = "punic_wars.170.a"
		CAR = {
			create_subject = {
				subject_type = tributary_state
				who = PREV
			}
		}
	}
}

country_event = { ##Alp Crossing - Rome warning
	id = punic_wars.171
	title = "punic_wars.171.t"
	desc = "punic_wars.171.d"
	picture = hannibal
	is_triggered_only = yes


	option = {
		name = "punic_wars.170.a"
		add_prestige = -5
	}
}


country_event = { #Punic war disaster
	id = punic_wars.1701
	title = "punic_wars.1701.t"
	desc = "punic_wars.1701.d"
	picture = panic

	fire_only_once = yes

	trigger = {
		tag = ROM
		has_global_flag = second_punic_war_start
		CRT = {
			war_score_against = {
				who = ROM
				value = 20
			}
		}
	}
	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = punic_war_disaster
			set_country_flag = panic_election
			random_list = {
				15 = { country_event = { id = punic_wars.17010 days = 30 } }
				10 = { country_event = { id = punic_wars.17011 days = 30 } }
				5 = { country_event = { id = punic_wars.17012 days = 30 } }
				5 = { country_event = { id = punic_wars.17013 days = 30 } }
				5 = { country_event = { id = punic_wars.17014 days = 30 } }
				7 = { country_event = { id = punic_wars.17015 days = 30 } }
				7 = { country_event = { id = punic_wars.17016 days = 30 } }
			}
		}
	}

	option = {
		name = "punic_wars.1701.a"
		custom_tooltip = punic_wars.1701.tt
		add_country_modifier = {
			name = rome_mass_desertions
			duration = 1825
		}
		add_stability = -2
		add_prestige = -25
		add_manpower = -20
	}
}

country_event = { #Punic war disaster, enforce next military law
	id = punic_wars.1702
	title = "punic_wars.1702.t"
	desc = "punic_wars.1702.d"
	picture = senat_conflict

	trigger = {
		tag = ROM
		had_country_flag = {
			flag = punic_war_disaster
			days = 240
		}
		NOT = { has_country_modifier = rome_mass_desertions }
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = "punic_wars.1702.a"
		add_mil_power = -150
		custom_tooltip = punic_wars.1702.tt
		hidden_effect = {
			if = {
				limit = {
					has_country_modifier = rome_basic_mil
				}
				country_event = {
					id = rome.17
				}
			}
			if = {
				limit = {
					has_country_modifier = servius_tullius_mil
				}
				country_event = {
					id = rome.19
				}
			}
			if = {
				limit = {
					has_country_modifier = camillan_mil
				}
				country_event = {
					id = rome.20
				}
			}
			if = {
				limit = {
					has_country_modifier = polybian_mil
				}
				country_event = {
					id = rome.35
				}
			}
			if = {
				limit = {
					has_country_modifier = marian_mil
				}
				country_event = {
					id = rome.36
				}
			}
		}
	}

	option = {
		name = "punic_wars.1702.b"
		add_stability = 1
	}
}

country_event = { #Punic war disaster, emergency consul appointment & dictatorship
	id = punic_wars.1703
	title = "punic_wars.1703.t"
	desc = "punic_wars.1703.d"
	picture = senat_conflict

	trigger = {
		tag = ROM
		had_country_flag = {
			flag = punic_war_disaster
			days = 180
		}
		has_country_flag = panic_election
	}

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = election_happening }
	}

	after = {
		hidden_effect = {
			clr_country_flag = panic_election
			clr_country_flag = election_happening
		}
	}

	option = { #temp. dictatorship
		name = "punic_wars.1703.a"
		add_republican_tradition = -5
		define_ruler = {
			name = "Scipio Africanus"
			dynasty = "Cornelii"
			adm = 5
			dip = 3
			mil = 6
			age = 31
		}
		hidden_effect = {
			kill_heir = { allow_new_heir = no }
			country_event = { id = government.38 days = 35 }
		}
		define_heir = {
			max_random_adm = 3
			max_random_dip = 3
			max_random_mil = 3
			claim = 100
			age = 40
			male = yes
			no_consort_with_heir = yes
		}
		add_country_modifier = {
			name = roman_dictatorship
			duration = 1095
		}
		if = {
			limit = { republican_tradition = 70 }
			add_ruler_modifier = { name = co_consul }
		}
		else = {
			add_ruler_modifier = { name = angry_consul }
		}
	}

	option = { #perm. dictatorship til end
		name = "punic_wars.1703.b"
		add_stability = -1
		add_republican_tradition = -15
		define_ruler = {
			name = "Scipio Africanus"
			dynasty = "Cornelii"
			adm = 5
			dip = 3
			mil = 6
			age = 31
		}
		hidden_effect = {
			kill_heir = { allow_new_heir = no }
			country_event = { id = government.38 days = 35 }
		}
		define_heir = {
			max_random_adm = 3
			max_random_dip = 3
			max_random_mil = 3
			claim = 100
			age = 40
			male = yes
			no_consort_with_heir = yes
		}
		add_country_modifier = {
			name = roman_dictatorship
			duration = -1
		}
		if = {
			limit = { republican_tradition = 70 }
			add_ruler_modifier = { name = co_consul }
		}
		else = {
			add_ruler_modifier = { name = angry_consul }
		}
	}

	option = { #normal guy
		name = "punic_wars.1703.c"
		define_ruler = {
			name = "Scipio Africanus"
			dynasty = "Cornelii"
			adm = 5
			dip = 3
			mil = 6
			age = 31
		}
		hidden_effect = {
			kill_heir = { allow_new_heir = no }
			country_event = { id = government.38 days = 35 }
		}
		define_heir = {
			max_random_adm = 3
			max_random_dip = 3
			max_random_mil = 3
			claim = 100
			age = 40
			male = yes
			no_consort_with_heir = yes
		}
		if = {
			limit = { republican_tradition = 70 }
			add_ruler_modifier = { name = co_consul }
		}
		else = {
			add_ruler_modifier = { name = angry_consul }
		}
	}
}

country_event = { #Punic war disaster, mass conscriptions
	id = punic_wars.1704
	title = "punic_wars.1704.t"
	desc = "punic_wars.1704.d"
	picture = training

	trigger = {
		tag = ROM
		had_country_flag = {
			flag = punic_war_disaster
			days = 240
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = "punic_wars.1704.a"
		add_manpower = 40
		add_army_tradition = -10
		add_stability = -1
		add_country_modifier = {
			name = emergency_punic_conscriptions
			duration = 1825
		}
	}

	option = {
		name = "punic_wars.1704.b"
		add_manpower = 20
	}
}

country_event = { #Punic war disaster, solving the desertions
	id = punic_wars.1705
	title = "punic_wars.1705.t"
	desc = "punic_wars.1705.d"
	picture = senat_conflict

	trigger = {
		tag = ROM
		had_country_flag = {
			flag = punic_war_disaster
			days = 120
		}
		has_country_modifier = rome_mass_desertions
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 4
			NOT = { has_country_modifier = emergency_punic_conscriptions }
		}
		modifier = {
			factor = 4
			NOT = { has_ruler = "Scipio Africanus" }
		}
	}

	option = {
		name = "punic_wars.1705.a"
		add_years_of_income = -0.75
		add_adm_power = -100
		remove_country_modifier = rome_mass_desertions
	}

	option = {
		name = "punic_wars.1705.b"
		add_republican_tradition = -10
		add_yearly_manpower = -1
		add_army_tradition = -5
		remove_country_modifier = rome_mass_desertions
	}

	option = {
		name = "punic_wars.1705.c"
		add_prestige = -5
	}
}

country_event = { #Punic war disaster, etruscan revolts
	id = punic_wars.17010
	title = "punic_wars.17010.t"
	desc = "punic_wars.17010.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				province_group = pg_etruria_group
			}
			any_subject_country = {
				any_owned_province = {
					province_group = pg_etruria_group
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.60
			pg_etruria_group = {
				type = any
				OR = { controlled_by = CRT controlled_by = CAR }
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							province_group = pg_etruria_group
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							province_group = pg_etruria_group
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17010.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 3 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, umbrian revolts
	id = punic_wars.17011
	title = "punic_wars.17011.t"
	desc = "punic_wars.17011.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				OR = {
					area = umbria_area
					area = picenum_area
				}
			}
			any_subject_country = {
				any_owned_province = {
					OR = {
						area = umbria_area
						area = picenum_area
					}
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.60
			OR = {
				umbria_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				picenum_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = umbria_area
								area = picenum_area
							}
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = umbria_area
								area = picenum_area
							}
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17011.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, marsium revolts
	id = punic_wars.17012
	title = "punic_wars.17012.t"
	desc = "punic_wars.17012.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				OR = {
					area = sabinia_area
					area = marsium_area
				}
			}
			any_subject_country = {
				any_owned_province = {
					OR = {
						area = sabinia_area
						area = marsium_area
					}
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.60
			OR = {
				sabinia_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				marsium_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = sabinia_area
								area = marsium_area
							}
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = sabinia_area
								area = marsium_area
							}
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17012.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, latium revolts
	id = punic_wars.17013
	title = "punic_wars.17013.t"
	desc = "punic_wars.17013.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				OR = {
					area = latium_area
					area = latium_novum_area
				}
			}
			any_subject_country = {
				any_owned_province = {
					OR = {
						area = latium_area
						area = latium_novum_area
					}
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 360
		modifier = {
			factor = 0.60
			OR = {
				latium_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				latium_novum_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = latium_area
								area = latium_novum_area
							}
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = latium_area
								area = latium_novum_area
							}
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17013.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, campania revolts
	id = punic_wars.17014
	title = "punic_wars.17014.t"
	desc = "punic_wars.17014.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				area = campania_area
			}
			any_subject_country = {
				any_owned_province = {
					area = campania_area
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 360
		modifier = {
			factor = 0.60
			campania_area = {
				type = any
				OR = { controlled_by = CRT controlled_by = CAR }
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							area = campania_area
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							area = campania_area
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17014.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, samnium revolts
	id = punic_wars.17015
	title = "punic_wars.17015.t"
	desc = "punic_wars.17015.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				OR = {
					area = samnium_area
					area = frentania_area
				}
			}
			any_subject_country = {
				any_owned_province = {
					OR = {
						area = samnium_area
						area = frentania_area
					}
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.60
			OR = {
				samnium_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				frentania_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = samnium_area
								area = frentania_area
							}
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = samnium_area
								area = frentania_area
							}
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17015.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 3 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, apulia revolts
	id = punic_wars.17016
	title = "punic_wars.17016.t"
	desc = "punic_wars.17016.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				OR = {
					area = daunia_area
					area = apulia_area
					area = salento_area
				}
			}
			any_subject_country = {
				any_owned_province = {
					OR = {
						area = daunia_area
						area = apulia_area
						area = salento_area
					}
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.60
			OR = {
				daunia_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				apulia_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				salento_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = daunia_area
								area = apulia_area
								area = salento_area
							}
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = daunia_area
								area = apulia_area
								area = salento_area
							}
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17016.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 3 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Punic war disaster, apulia revolts
	id = punic_wars.17017
	title = "punic_wars.17017.t"
	desc = "punic_wars.17017.d"
	picture = socii_revolt

	trigger = {
		tag = ROM
		has_country_flag = punic_war_disaster
		NOT = {
			has_global_flag = rebel_socii_happening
			has_global_flag = second_punic_war_near_end
		}
		OR = {
			any_owned_province = {
				OR = {
					area = lucania_area
					area = bruttium_area
					area = calabria_area
				}
			}
			any_subject_country = {
				any_owned_province = {
					OR = {
						area = lucania_area
						area = bruttium_area
						area = calabria_area
					}
				}
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.60
			OR = {
				lucania_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				bruttium_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
				calabria_area = {
					type = any
					OR = { controlled_by = CRT controlled_by = CAR }
				}
			}
		}
		modifier = {
			factor = 0.50
			CRT = {
				war_score_against = {
					who = ROM
					value = 20
				}
			}
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 0.90
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.95
			has_country_modifier = roman_dictatorship
		}
		modifier = {
			factor = 0.90
			has_country_modifier = emergency_punic_conscriptions
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = rebel_socii_happening
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = lucania_area
								area = bruttium_area
								area = calabria_area
							}
						}
					}
				}
				ROM = { set_country_flag = socii_revolts }
				every_subject_country = {
					limit = {
						is_subject_of_type = socii_subject
						capital_scope = {
							OR = {
								area = lucania_area
								area = bruttium_area
								area = calabria_area
							}
						}
					}
					set_country_flag = socii_revolting
				}
			}
		}
	}

	option = {
		name = "punic_wars.17017.a"
		if = {
			limit = {
				has_country_flag = socii_revolts
			}
			custom_tooltip = punic_wars_rome_socii_revolt.tt
			hidden_effect = {
				every_subject_country = {
					limit = {
						has_country_flag = socii_revolting
					}
					add_country_modifier = { name = socii_war_buff_indiv duration = 365 }
					add_prestige_or_monarch_power = { amount = 10 }
					add_army_tradition_or_mil_power = { amount = 10 }
					add_manpower = 4
					add_treasury = 200
					set_country_flag = rebel_socii
					declare_war_with_cb = {
						who = PREV
						casus_belli = cb_rome_socii_rebellion
					}
					clr_country_flag = socii_revolting
				}
			}
		}
		else = {
			custom_tooltip = punic_wars_rome_rebel_revolt.tt
			hidden_effect = {
				set_variable = { which = whilecounter value = 2 }
				while = {
					limit = { check_variable = { whilecounter = 1 }  }
					subtract_variable = { whilecounter = 1 }
					random_owned_province = {
						limit = {
							province_group = pg_etruria_group
							NOT = { has_province_flag = rebels_spawned }
						}
						set_province_flag = rebels_spawned
						change_controller = REB
						spawn_rebels = {
							type = nationalist
							size = 2
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_global_flag = rebel_socii_happening
			clr_country_flag = socii_revolts
		}
	}
}

country_event = { #Hannibal escapes Italy
	id = punic_wars.18
	title = "punic_wars.18.t"
	desc = "punic_wars.18.d"
	picture = hannibal1
	fire_only_once = yes

	trigger = {
		tag = ROM
		has_global_flag = hannibal_in_italy_flag
		war_with = CAR
		controls = 101
		controls = 102
		NOT = {
			italia_superregion = {
				units_in_province = CAR
				units_in_province = CRT
			}
		}
	}

	mean_time_to_happen = { months = 1 }

	immediate = {
		hidden_effect = {
			set_global_flag = second_punic_war_near_end
			CRT = {
				remove_country_modifier = barcids_hannibal_buff
			}
		}
	}

	option = {
		name = "punic_wars.18.a"
		custom_tooltip = punic_wars.18.tt
		add_war_exhaustion = -4
		hidden_effect = {
			every_country = {
				limit = {
					capital_scope = {
						superregion = italia_superregion
					}
					OR = {
						is_subject_of = CAR
						is_subject_of = CRT
					}
				}
				grant_independence = yes
			}
			CRT = {
				every_owned_province = {
					limit = {
						superregion = italia_superregion
					}
					remove_core = CRT
					cede_province = ROM
				}
			}
			CAR = {
				every_owned_province = {
					limit = {
						superregion = italia_superregion
					}
					remove_core = CAR
					cede_province = ROM
				}
			}
		}
	}
}

country_event = { #Second Punic War end
	id = punic_wars.19
	title = "punic_wars.19.t"
	desc = "punic_wars.19.d"
	picture = second_punic_war_end
	fire_only_once = yes

	trigger = {
		tag = ROM
		has_global_flag = second_punic_war_start
		war_with = CAR
		OR = {
			AND = {
				CAR = {
					all_owned_province = {
						superregion = hispania_superregion
						controlled_by = ROM
					}
				}
				CRT = {
					all_owned_province = {
						superregion = hispania_superregion
						controlled_by = ROM
					}
				}
			}
			AND = {
				612 = { controlled_by = ROM }
				war_score_against = {
					who = CAR
					value = 60
				}
			}
		}
	}

	mean_time_to_happen = { months = 1 }

	immediate = {
		hidden_effect = {
			set_global_flag = second_punic_war_end
			clr_country_flag = second_punic_war_near_end
			clr_country_flag = punic_war_disaster
			remove_country_modifier = roman_dictatorship
			remove_country_modifier = emergency_punic_conscriptions
			remove_country_modifier = rome_mass_desertions
			remove_country_modifier = rom_punic_war_2_navy_buff
			ROM = {
				white_peace = CRT
				white_peace = CAR
			}
		}
	}

	option = {
		name = "punic_wars.19.a"
		custom_tooltip = punic_wars.19.tt
		hidden_effect = {
			CRT = {
				every_owned_province = {
					limit = {
						OR = {
							province_group = pg_punicwar_iberia_group
							province_group = pg_north_of_iberus_group
						}
					}
					cede_province = ROM
				}
				hispania_superregion = {
					remove_core = CRT
				}
			}

			CAR = {
				every_owned_province = {
					limit = {
						OR = {
							province_group = pg_punicwar_iberia_group
							area = baleares_area
							province_id = 1249
							province_id = 1250
						}
					}
					cede_province = ROM
				}

				every_owned_province = {
					limit = {
						OR = {
							area = lixiane_area
							area = gaetulia_darae
							area = cerne_area
						}
					}
					remove_core = CAR
					add_core = SLT
					cede_province = SLT
				}

				#create numidia
				if = {
					limit = {
						exists = NUM
					}
					every_owned_province = {
						limit = {
							province_group = pg_punicwar_numidia_group
						}
						remove_core = CAR
						add_core = NUM
						cede_province = NUM
					}
				}
				else = {
					every_owned_province = {
						limit = {
							province_group = pg_punicwar_numidia_group
						}
						remove_core = CAR
						add_core = NUM
					}
					release = NUM
				}

				if = {
					limit = {
						exists = GAT
					}
					every_owned_province = {
						limit = {
							OR = {
								area = madethubadus_area
								area = gaetulia
								area = militiana_area
							}
						}
						remove_core = CAR
						add_core = GAT
						cede_province = GAT
					}
				}
				else = {
					every_owned_province = {
						limit = {
							OR = {
								area = madethubadus_area
								area = gaetulia
								area = militiana_area
							}
						}
						remove_core = CAR
						add_core = GAT
					}
					release = GAT
				}

				if = {
					limit = {
						exists = BAG
					}
					every_owned_province = {
						limit = {
							OR = {
								area = deserta_tripolitania
								area = deserta_syrtica
							}
						}
						remove_core = CAR
						add_core = BAG
						cede_province = BAG
					}
				}
				else = {
					every_owned_province = {
						limit = {
							OR = {
								area = deserta_tripolitania
								area = deserta_syrtica
							}
						}
						remove_core = CAR
						add_core = BAG
					}
					release = BAG
				}

				if = {
					limit = {
						exists = NAS
					}
					every_owned_province = {
						limit = {
							OR = {
								area = augila_area
								area = nasamonia_area
							}
						}
						remove_core = CAR
						add_core = NAS
						cede_province = NAS
					}
				}
				else = {
					every_owned_province = {
						limit = {
							OR = {
								area = augila_area
								area = nasamonia_area
							}
						}
						remove_core = CAR
						add_core = NAS
					}
					release = NAS
				}

				if = {
					limit = {
						exists = GAR
					}
					every_owned_province = {
						limit = {
							OR = {
								area = garamantum_area
								area = desertum_africanum
								area = garamantum_ulterior
							}
						}
						remove_core = CAR
						add_core = GAR
						cede_province = GAR
					}
				}
				else = {
					every_owned_province = {
						limit = {
							OR = {
								area = garamantum_area
								area = desertum_africanum
								area = garamantum_ulterior
							}
						}
						remove_core = CAR
						add_core = GAR
					}
					release = GAR
				}
				if = {
					limit = {
						exists = MRT
					}
					every_owned_province = {
						limit = {
							region = mauretania_region
							NOT = {
								province_group = pg_punicwar_numidia_group
							}
						}
						remove_core = CAR
						add_core = MRT
						cede_province = MRT
					}
				}
				else_if = {
					limit = {
						any_owned_province = {
							region = mauretania_region
							NOT = {
								province_group = pg_punicwar_numidia_group
							}
						}
					}
					every_owned_province = {
						limit = {
							region = mauretania_region
							NOT = {
								province_group = pg_punicwar_numidia_group
							}
						}
						remove_core = CAR
						add_core = MRT
					}
					release = MRT
				}
				else = {
					every_known_country = {
						limit = {
							capital_scope = {
								region = mauretania_region
								NOT = {
									province_group = pg_punicwar_numidia_group
								}
							}
						}
						every_owned_province = {
							limit = {
								region = mauretania_region
								NOT = {
									province_group = pg_punicwar_numidia_group
								}
							}
							remove_core = CAR
							add_core = MRT
						}
						set_country_flag = potential_releaser_ugly_workaround
					}
					random_known_country = {
						limit = {
							has_country_flag = potential_releaser_ugly_workaround
						}
						release = MRT
					}
					every_province = {
						limit = {
							owner = { has_country_flag = potential_releaser_ugly_workaround }
							is_core = MRT
						}
						cede_province = MRT
					}
					every_known_country = {
						clr_country_flag = potential_releaser_ugly_workaround
					}
				}
			}
			MRT = {
				change_government = monarchy
				add_government_reform = despotism_reform
				add_absolutism = 10
				add_prestige = 10
				mauretania_region = {
					discover_country = MRT
				}
				every_known_country = {
					limit = {
						capital_scope = {
							region = mauretania_region
							NOT = { province_group = pg_punicwar_numidia_group }
						}
					}
					if = {
						limit = {
							total_development = MRT
						}
						MRT = { inherit = PREV }
					}
					else = {
						MRT = {
							create_subject = {
								subject_type = vassal
								subject = PREV
							}
						}
					}
				}
				atlas_mons = {
					if = {
						limit = {
							is_city = no
						}
						add_core = MRT
						cede_province = MRT
					}
				}
				mauretania_ulterior = {
					if = {
						limit = {
							is_city = no
						}
						add_core = MRT
						cede_province = MRT
					}
				}
				disband_all_units = yes
				stabilize_country_effect = yes
			}
			NUM = {
				change_government = monarchy
				add_government_reform = despotism_reform
				add_absolutism = 10
				add_prestige = 10
				define_ruler = {
					name = "Massinissa I"
					dynasty = "of Massylii"
					ADM = 5
					DIP = 5
					MIL = 6
					culture = punic
					age = 30
				}
				set_capital = 589
				add_historical_friend = ROOT
				ROOT = { add_historical_friend = PREV }
				pg_punicwar_numidia_group = {
					discover_country = NUM
				}
				africa_region = {
					discover_country = NUM
				}
				every_known_country = {
					limit = {
						or = {
							capital_scope = { province_group = pg_punicwar_numidia_group }
							TAG = GAT
						}
					}
					if = {
						limit = {
							total_development = NUM
						}
						NUM = { inherit = PREV }
					}
					else = {
						NUM = {
							create_subject = {
								subject_type = vassal
								subject = PREV
							}
						}
					}
				}
				every_subject_country = {
					limit = {
						OR = { tag = MAA tag = MYL }
					}
					NUM = { inherit = PREV }
				}
				disband_all_units = yes
				stabilize_country_effect = yes
			}
			GAR = {
				change_government = monarchy
				add_government_reform = despotism_reform
				add_absolutism = 10
				add_prestige = 10
				garamantum_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = GAR
					cede_province = GAR
				}
				desertum_africanum = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = GAR
					cede_province = GAR
				}
				garamantum_ulterior = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = GAR
					cede_province = GAR
				}
				disband_all_units = yes
				stabilize_country_effect = yes
			}
			BAG = {
				change_government = tribal
				add_government_reform = steppe_horde_reform
				deserta_tripolitania = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = BAG
					cede_province = BAG
				}
				deserta_syrtica = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = BAG
					cede_province = BAG
				}
				deserta_numidia = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = BAG
					cede_province = BAG
				}
			}
			GAT = {
				change_government = tribal
				add_government_reform = steppe_horde_reform
			}
			NAS = {
				change_government = tribal
				add_government_reform = steppe_horde_reform
				augila_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = NAS
					cede_province = NAS
				}
				nasamonia_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_core = NAS
					cede_province = NAS
				}
			}
			CRT = {
				release_all_subjects = yes
				release_all_possible_countries = yes
				every_owned_province = {
					set_province_flag = annihilate_country_flag
				}
				annihilate_country_effect = yes
			}
			CAR = {
				add_country_modifier = {
					name = punic_war_car_disarmament
					duration = -1
				}
				every_owned_province = {
					limit = {
						OR = {
							region = libya_deserta_region
							area = fortunatae_insulae
						}
					}
					remove_core = CAR
					decolonize = yes
				}
				release = ISC
				release = EMC
				release = SKY
				release = TRP
				release = AST
				release = IDY
				release_all_subjects = yes
			}
		}
		ROM = {
			hidden_effect = {
				every_owned_province = {
					limit = {
						culture_group = iberian_group
						has_port = yes
					}
					add_territorial_core = ROM
				}
			}
			add_treasury = 10000
			add_prestige = 50
			add_adm_power = 200
			add_dip_power = 200
			add_mil_power = 200
			add_stability = 1
			add_war_exhaustion = -2
		}
	}
	after = {
		hidden_effect = {
			CAR = {
				every_owned_province = {
					limit = {
						NOT = {
							region = africa_region
						}
					}
					set_province_flag = annihilate_country_flag
				}
				annihilate_country_effect = yes
			}
		}
	}
}

########################################################################################
# Third Punic War started - notification event for Rome
########################################################################################
country_event = {
	id = punic_wars.20
	title = "punic_wars.20.t"
	desc = "punic_wars.20.d"
	picture = third_punic_war
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		tag = ROM
		has_global_flag = second_punic_war_end
		NOT = {
			has_global_flag = third_punic_war_end
		}
		war_with = CAR
	}

	mean_time_to_happen = { months = 1 }

	immediate = {
		hidden_effect = {
			set_global_flag = third_punic_war_start
		}
	}

	option = {
		name = "punic_wars.20.a"
		add_prestige = 3
		CAR = {
			country_event = {
				id = punic_wars.200
				days = 1
			}
		}
	}
}
country_event = { # Second Punic War started - notification event for Carthage
	id = punic_wars.200
	title = "punic_wars.200.t"
	desc = "punic_wars.200.d"
	picture = third_punic_war
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "punic_wars.150.a"
		add_prestige = -3
	}
}

country_event = { #Third Punic War end
	id = punic_wars.21
	title = "punic_wars.21.t"
	desc = "punic_wars.21.d"
	picture = third_punic_war_end
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		tag = ROM
		has_global_flag = third_punic_war_start
		war_with = CAR
		612 = {
			controlled_by = ROM
		}
	}

	mean_time_to_happen = { months = 1 }


	option = {
		name = "punic_wars.21.a"
		custom_tooltip = punic_wars.21.tt
		hidden_effect = {
			clr_global_flag = third_punic_war_start
			CAR = {
				every_owned_province = {
					limit = {
						area = baleares_area
					}
					remove_core = CAR
					add_core = GYM
					cede_province = GYM
				}
				every_owned_province = {
					limit = {
						NOT = {
							OR = {
								area = carthago_area
								area = bagrada_area
								area = numidia_maritimae
								area = zeugitana_area
								area = mediterranea_insulae
								area = tripolitania_east
								area = tripolitania_west
								area = byzacium_area
								province_id = 620
								province_id = 621
								province_id = 625
								province_id = 629
							}
						}
					}
					remove_core = CAR
					add_core = NUM
					cede_province = NUM
				}
			}
			ROM = {
				inherit = CAR
				add_prestige = 5
			}
			612 = {
				add_base_tax = -10
				add_base_production = -20
				add_base_manpower = -10
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_devastation = 100
			}
		}
	}
}